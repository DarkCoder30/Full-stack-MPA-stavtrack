(function(){function A(){"object"===typeof window.zTrackerCallbacks&&(window.zTrackerCallbacks.forEach(function(e){if("function"==typeof e)try{e()}catch(h){}}),window.zTrackerCallbacks=[])}"undefined"===typeof window.zTracker&&(window.zTracker=function(e){function h(a,b){var c="",d=k()||{};d[m]={ct:a};l&&l.phone&&(d[m].phone=l.phone,d[m].cLength=l.cLength,d[m].mask=r);a=[];for(var g in d)if(d.hasOwnProperty(g)){var f=g+":";"object"==typeof d[g]?(f+=d[g].ct,d[g].phone&&(f+=":"+d[g].phone+":"+(d[g].cLength||
"")+":"+encodeURIComponent(d[g].mask||""))):f+=d[g];a.push(f)}b&&(d=new Date,d.setTime(d.getTime()+864E5*b),c+=";expires="+d);c+=";path=/";w&&(c+=";domain="+w);document.cookie="ztracker="+encodeURIComponent(a.join("|"))+c}function k(a){for(var b=(a||"ztracker")+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){var g=c[d].trim();if(0===g.indexOf(b)){c=decodeURIComponent(g.substring(b.length,g.length));if(a)return c;var f={},B=0;if(0<c.indexOf(":"))c.split("|").map(function(p){p=p.split(":");f[p[0]]=
{ct:p[1],phone:p[2],cLength:p[3],mask:decodeURIComponent(p[4]||"")};B++}),f[0]&&1==B&&0!=m&&(f[m]={ct:f[0]},delete f[0]);else{if("undefined"==typeof window.ctTrackerDefCKey)window.ctTrackerDefCKey=m;else if(window.ctTrackerDefCKey!=m)break;f[m]={ct:c}}return f}}return null}function t(a){if(!a||0>a.indexOf("."))return!1;var b=location.hostname.indexOf(a);return 0==b||0<b&&"."==location.hostname.substr(b-1,1)?(w=a,!0):!1}function q(a){if(C)return!1;l&&D(l.phone,l.cLength,!0);C=!0;if(!a.roistat)if(window.roistat&&
window.roistat.visit)a.roistat=window.roistat.visit;else{var b=window.roistatVisitCallback||!1;window.roistatVisitCallback=function(c){a.roistat=c;x&&I(a);b&&b(c)}}e.metrics?(e.metrics.metrika&&(n(function(){if(window["yaCounter"+e.metrics.metrika])return E(a),!0}),document.addEventListener("yacounter"+e.metrics.metrika+"inited",function(){E(a)})),e.metrics.ga&&n(function(){if(window.ga||window.gtag)return J(a),!0}),(e.metrics.metrika||e.metrics.ga)&&setTimeout(function(){x||u(a)},3E3)):u(a)}function n(a,
b){if(!a())var c=0,d=(b||2E3)/50,g=setInterval(function(){(a()||++c>d)&&clearInterval(g)},50)}function E(a){if(!F){F=!0;var b="yaCounter"+e.metrics.metrika;window[b]&&window[b].hasOwnProperty("getClientID")&&(a.metrika={clid:window[b].getClientID(),tracker:e.metrics.metrika},e.metrics.ga&&!a.ga||u(a))}}function J(a){function b(c){a.ga={clid:c,tracker:e.metrics.ga};e.metrics.metrika&&!a.metrika||u(a)}window.ga?ga(function(){for(var c=ga.getAll(),d=0;d<c.length;d++)if(c[d].get("trackingId")==e.metrics.ga){b(c[d].get("clientId"));
break}}):window.gtag&&gtag("get",e.metrics.ga,"client_id",b)}function u(a){x=!0;G(y,a,function(b){if(b.isError)l&&!a.ping&&(K(),l=!1),(b.cookie||a.cookie)&&h(b.cookie||a.cookie,7);else{b.cookie&&(a.cookie=b.cookie);if(!l||l.phone!=b.phone||"mask"in b&&(b.mask||"")!=r)"mask"in b&&(r=b.mask),D(b.phone,b.countryLength),l={phone:b.phone,cLength:b.countryLength};a.cookie&&h(a.cookie,7);b.interval&&setTimeout(function(){a.active=v;a.ping=!0;u(a);v=!1},1E3*b.interval)}})}function I(a){if(a.cookie&&a.roistat){var b=
{};["cookie","id","roistat"].forEach(function(c){b[c]=a[c]});G(y+"?update",b)}}function D(a,b,c){if(a||c){for(var d=document.getElementsByClassName(z),g=0;g<d.length;g++){var f=d[g];f.hasAttribute("href")&&(c&&f.setAttribute("data-ct-origin-href",f.getAttribute("href")),f.setAttribute("href",(0<=f.getAttribute("href").indexOf("callto")?"callto:+":"tel:+")+a));c&&f.setAttribute("data-ct-origin-phone",f.innerHTML);f.innerHTML=zTracker.formatPhone(a,f.hasAttribute("data-mask")?f.getAttribute("data-mask"):
r,parseInt(b))}a=document.createEvent("Event");a.initEvent("zd:show",!0,!0);document.dispatchEvent(a)}}function K(){for(var a=document.getElementsByClassName(z),b=0;b<a.length;b++){var c=a[b];c.hasAttribute("data-ct-origin-href")&&c.setAttribute("href",c.getAttribute("data-ct-origin-href"));c.innerHTML=c.getAttribute("data-ct-origin-phone")}}function G(a,b,c){var d=new XMLHttpRequest;d.onreadystatechange=function(){if(4==d.readyState&&200==d.status&&c&&"function"==typeof c)try{var g=JSON.parse(d.responseText);
c(g)}catch(f){}};d.open("POST",a,!0);b&&d.setRequestHeader("Content-type","application/x-www-form-urlencoded");d.send(b?H(b,!1):"")}function H(a,b){var c=[],d;for(d in a)if(a.hasOwnProperty(d)){var g=b?b+"["+d+"]":d,f=a[d];c.push(null!==f&&"object"===typeof f?H(f,g):encodeURIComponent(g)+"="+encodeURIComponent(f))}return c.join("&")}var w="",m=0,y="https://api.zadarma.com/calltracker/",z="zphone",v=!0,x=!1,r=!1,C=!1,F=!1,l=!1;(function(){if(!e||!e.id)return!1;zTracker.url&&(y=zTracker.url);m=e.id.substr(32)||
0;e.id=e.id.substr(0,32);e.cssClass&&(z=e.cssClass);e.domain&&(e.domain.indexOf(",")?e.domain.split(",").forEach(function(c){return!t(c)}):t(e.domain));["click","touchend","keyup"].forEach(function(c){window.addEventListener(c,function(){v=!0})});var a=k()||{};a=a[m]?a[m]:{};var b={url:window.location.href,referer:document.referrer,cookie:a.ct?a.ct:"",id:e.id,active:v,roistat:k("roistat_visit")};a.phone&&(r=a.mask,l={phone:a.phone,cLength:a.cLength});b.roistat||delete b.roistat;document.addEventListener("DOMContentLoaded",
function(){q(b)});"loading"!=document.readyState&&q(b)}).call(this)},"object"===typeof _zCtOptions&&new window.zTracker(_zCtOptions));zTracker.formatPhone=function(e,h,k){if(h){var t=h,q=h.indexOf("%"),n=0;0<=q&&(k=k||1,h=h.substr(0,q)+e.substr(0,k)+h.substr(q+1),n+=k);for(;n<e.length&&(h=h.replace("X",e[n]),t!=h);n++)t=h;n!=e.length&&(h+=e.substr(n));h=h.replace(/X/g,"").replace(/.*?\|/,"");if(-1<h.indexOf("~"))for(e=h.split("~"),h="",k=0;k<e.length;k++)h+='<span class="zphone-part-'+(k+1)+'">'+
e[k]+"</span>";return h}return k?'<span class="zphone-country">+'+e.substr(0,k)+'</span><span class="zphone-region"> ('+e.substr(k,3)+') </span><span class="zphone-number">'+e.substr(k+3,3)+"-"+e.substr(k+6,2)+"-"+e.substr(k+8)+"</span>":'<span class="zphone-number">'+e+"</span>"};document.currentScript&&document.currentScript.hasAttribute("data-url")&&(zTracker.url=document.currentScript.getAttribute("data-url"));"loading"!=document.readyState?A():document.addEventListener("DOMContentLoaded",function(){A()})})();
